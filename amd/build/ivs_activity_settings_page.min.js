function set_display_option(fieldSelector,elementSelector){const field=document.querySelector(fieldSelector),element=document.querySelector(elementSelector);field&&element&&(field.checked?element.style.display="":element.style.display="none")}function set_display_option_timing_mode(fieldSelector,elementSelector){const field=document.querySelector(fieldSelector),element=document.querySelector(elementSelector);field&&element&&(2!=field.value?element.style.display="none":element.style.display="")}define("mod_ivs/ivs_activity_settings_page",["core/notification","core/custom_interaction_events","core/modal","core/modal_registry","core/modal_factory","core/templates","core/str","core/modal_events"],(function(Notification,CustomEvents,Modal,ModalRegistry,ModalFactory,Templates,Str,ModalEvents){let selectedPanoptoVideo="";return{init:function(panopto_data){const modStandardGrade=document.querySelector("#id_modstandardgrade");modStandardGrade&&(modStandardGrade.style.display="none");const examModeElement=document.querySelector("#id_exam_mode_enabled_value");examModeElement&&examModeElement.addEventListener("change",(function(){set_display_option("#id_exam_mode_enabled_value","#id_mod_ivsgrades")}));const annotationsElement=document.querySelector("#id_annotations_enabled_value");annotationsElement&&annotationsElement.addEventListener("change",(function(){set_display_option("#id_annotations_enabled_value","#id_mod_ivsnotification")})),set_display_option("#id_annotations_enabled_value","#id_mod_ivsnotification"),set_display_option("#id_exam_mode_enabled_value","#id_mod_ivsgrades"),set_display_option_timing_mode("#id_match_question_enabled_value","#fgroup_id_show_realtime_results"),set_display_option_timing_mode("#id_match_question_enabled_value","#fgroup_id_show_timing_take_summary");const matchQuestionElement=document.querySelector("#id_match_question_enabled_value");if(matchQuestionElement&&matchQuestionElement.addEventListener("change",(function(){set_display_option_timing_mode("#id_match_question_enabled_value","#fgroup_id_show_realtime_results"),set_display_option_timing_mode("#id_match_question_enabled_value","#fgroup_id_show_timing_take_summary")})),panopto_data){let servername=panopto_data.servername,instancename=panopto_data.instancename,sessiongroupid=panopto_data.sessiongroupid,iframeURL="https://"+servername+"/Panopto/Pages/Sessions/EmbeddedUpload.aspx?playlistsEnabled=false&instance="+instancename+"&folderID="+sessiongroupid,btn=document.createElement("button");btn.innerHTML=panopto_data.buttonname,btn.classList.add("btn","btn-primary","panopto-selector"),btn.style.marginLeft="20px";const panoptoVideoElement=document.querySelector("#id_panopto_video");panoptoVideoElement&&panoptoVideoElement.parentNode&&panoptoVideoElement.parentNode.insertBefore(btn,panoptoVideoElement.nextSibling),ModalFactory.create({type:ModalFactory.types.SAVE_CANCEL,title:"Panopto videos",large:!0,body:Templates.render("mod_ivs/panopto_modal",{iframeurl:iframeURL})},[btn]).done((function(modal){modal.getRoot().on(ModalEvents.save,(function(e){if(e.preventDefault(),modal.hide(),selectedPanoptoVideo.ids&&selectedPanoptoVideo.ids.length<=1){let panopto_video_name=selectedPanoptoVideo.names,panopto_video_id=selectedPanoptoVideo.ids,panopto_data_obj=JSON.stringify({servername:servername,instancename:instancename,sessiongroupid:sessiongroupid,videoname:panopto_video_name,sessionId:panopto_video_id});const jsonField=document.querySelector("#id_panopto_video_json_field"),videoField=document.querySelector("#id_panopto_video");panopto_video_name&&1==panopto_video_name.length?jsonField&&(jsonField.value=panopto_data_obj):(jsonField&&(jsonField.value="",jsonField.setAttribute("value","")),videoField&&videoField.setAttribute("value","")),videoField&&(videoField.value=panopto_video_name)}}))})),window.addEventListener("message",(e=>{let panopto_selected_video_data=JSON.parse(e.data);if(selectedPanoptoVideo=JSON.parse(e.data),"ready"===panopto_selected_video_data.cmd){let message={cmd:"createEmbeddedFrame"};document.getElementById("panopto_iframe").contentWindow.postMessage(JSON.stringify(message),"https://"+servername)}if("deliveryList"===panopto_selected_video_data.cmd){const modalFooter=document.querySelector(".modal-footer"),primaryBtn=modalFooter?modalFooter.querySelector(".btn-primary"):null;primaryBtn&&(panopto_selected_video_data.ids.length>1?(primaryBtn.setAttribute("disabled","true"),primaryBtn.setAttribute("title",panopto_data.tooltip)):(primaryBtn.removeAttribute("disabled"),primaryBtn.removeAttribute("title")))}}))}}}}));

//# sourceMappingURL=ivs_activity_settings_page.min.js.map