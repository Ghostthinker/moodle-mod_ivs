function set_display_option(e,t){$(e).is(":checked")?$("[data-groupname="+t+"]").css("display",""):$("[data-groupname="+t+"]").css("display","none")}define(["jquery","core/notification","core/custom_interaction_events","core/modal","core/modal_registry","core/modal_factory","core/templates","core/str","core/modal_events"],function(e,t,o,a,n,i,s,d,r){let l="";return{init:function(t){if(e("#id_match_question_enabled_value").change(function(){set_display_option("#id_match_question_enabled_value","playbackrate_enabled")}),e("#id_annotations_enabled_value").change(function(){set_display_option("#id_annotations_enabled_value","user_notification_settings")}),t){let o=t.servername,a=t.instancename,n=t.sessiongroupid,d="https://"+o+"/Panopto/Pages/Sessions/EmbeddedUpload.aspx?playlistsEnabled=false&instance="+a+"&folderID="+n,c=document.createElement("button");c.innerHTML=t.buttonname,c.classList.add("btn"),c.classList.add("btn-primary"),c.classList.add("panopto-selector"),c.style.marginLeft="20px",e("#id_panopto_video").after(c);let p=e(".panopto-selector");i.create({type:i.types.SAVE_CANCEL,title:"Panopto videos",large:!0,body:s.render("mod_ivs/panopto_modal",{iframeurl:d})},p).done(function(t){t.getRoot().on(r.save,function(i){if(i.preventDefault(),t.hide(),l.ids.length<=1){let t=l.names,i=l.ids,s=JSON.stringify({servername:o,instancename:a,sessiongroupid:n,videoname:t,sessionId:i});1==t.length?e("#id_panopto_video_json_field").val(s):(e("#id_panopto_video_json_field").val(""),e("#id_panopto_video_json_field").attr("value",""),e("#id_panopto_video").attr("value","")),e("#id_panopto_video").val(t)}})}),window.addEventListener("message",a=>{let n=JSON.parse(a.data);l=JSON.parse(a.data),"ready"===n.cmd&&(win=document.getElementById("panopto_iframe").contentWindow,message={cmd:"createEmbeddedFrame"},win.postMessage(JSON.stringify(message),"https://"+o)),"deliveryList"===n.cmd&&(n.ids.length>1?(e(".modal-footer").children().closest(".btn-primary").attr("disabled",!0),e(".modal-footer").children().closest(".btn-primary").attr("title",t.tooltip)):(e(".modal-footer").children().closest(".btn-primary").attr("disabled",!1),e(".modal-footer").children().closest(".btn-primary").removeAttr("title",!0)))})}}}});
