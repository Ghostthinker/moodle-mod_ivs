function set_display_option(e,t){$(e).is(":checked")?$("[data-groupname="+t+"]").css("display",""):$("[data-groupname="+t+"]").css("display","none")}define(["jquery","core/notification","core/custom_interaction_events","core/modal","core/modal_registry","core/modal_factory","core/templates","core/str","core/modal_events"],function(e,t,a,n,o,i,s,d,r){return{init:function(t){if(e("#id_match_question_enabled_value").change(function(){set_display_option("#id_match_question_enabled_value","playbackrate_enabled")}),e("#id_annotations_enabled_value").change(function(){set_display_option("#id_annotations_enabled_value","user_notification_settings")}),t){let a=t.servername,n=t.instancename,o=t.sessiongroupid,d="https://"+a+"/Panopto/Pages/Sessions/EmbeddedUpload.aspx?playlistsEnabled=false&instance="+n+"&folderID="+o,l=!1,c=document.createElement("button");c.innerHTML=t.buttonname,c.classList.add("btn"),c.classList.add("btn-primary"),c.classList.add("panopto-selector"),c.style.marginLeft="20px",e("#id_panopto_video").after(c);let m=e(".panopto-selector");i.create({type:i.types.SAVE_CANCEL,title:"Panopto videos",large:!0,body:s.render("mod_ivs/panopto_modal",{iframeurl:d})},m).done(function(e){e.getRoot().on(r.save,function(t){t.preventDefault(),e.hide(),l=!0,win=document.getElementsByTagName("iframe")[1].contentWindow,message={cmd:"createEmbeddedFrame"},win.postMessage(JSON.stringify(message),"https://"+a)})}),window.addEventListener("message",i=>{let s=JSON.parse(i.data);if("ready"===s.cmd&&(win=document.getElementsByTagName("iframe")[1].contentWindow,message={cmd:"createEmbeddedFrame"},win.postMessage(JSON.stringify(message),"https://"+a)),"deliveryList"===s.cmd&&(s.ids.length>1?(e(".modal-footer").children().first().attr("disabled",!0),e(".modal-footer").children().first().attr("title",t.tooltip)):(e(".modal-footer").children().first().attr("disabled",!1),e(".modal-footer").children().first().removeAttr("title",!0))),"deliveryList"===s.cmd&&l&&s.ids.length<=1){let t=s.names,i=s.ids,d=JSON.stringify({servername:a,instancename:n,sessiongroupid:o,videoname:t,sessionId:i});1==t.length?e("#id_panopto_video_json_field").val(d):(e("#id_panopto_video_json_field").val(""),e("#id_panopto_video_json_field").attr("value",""),e("#id_panopto_video").attr("value","")),e("#id_panopto_video").val(t)}})}}}});
